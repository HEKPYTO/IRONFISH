#!/bin/sh
# pre-commit hook to ensure code quality

echo "Running pre-commit checks..."

echo "Checking formatting..."
cargo fmt --all -- --check
if [ $? -ne 0 ]; then
    echo "Formatting check failed. Run 'cargo fmt' to fix."
    exit 1
fi

echo "Checking lints..."
cargo clippy --workspace --all-targets -- -D warnings
if [ $? -ne 0 ]; then
    echo "Clippy check failed. Fix warnings before committing."
    exit 1
fi

echo "Running tests (fast)..."
cargo test --workspace --lib
if [ $? -ne 0 ]; then
    echo "Tests failed."
    exit 1
fi

echo "Pre-commit checks passed."
exit 0
